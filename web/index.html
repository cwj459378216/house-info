<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Little Pea</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="./index.css">
</head>

<body>
    <div class="container">
        <div class="row content">
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <form id="form" method="POST">

                        </form>
                    </div>
                </div>

            </div>
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <div>
                            1123123
                        </div>
                        <div id="asklz">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/TypewriterJS/1.0.0/typewriter.min.js"></script>
<script>
    let info = [];
    var app = document.getElementById('asklz');
    console.log(app)
    var typewriter = new Typewriter(asklz, {
        loop: false
    });
    // typewriter.typeString('打字机 JS 示例')
    //     .pauseFor(2500)
    //     .deleteAll()
    //     .typeString('该说些什么呢？')
    //     .pauseFor(2500)
    //     .typeString('让我好好想想..')
    //     .deleteAll()
    //     .typeString('有了！')
    //     .pauseFor(2500)
    //     .deleteAll()
    //     .typeString('其实，我挺帅的')
    //     .pauseFor(2500)
    //     .deleteChars(3)
    //     .typeString('很谦虚!')
    //     .start();

    var form = document.getElementById('form');
    form.innerHTML = ` <div class="row mb-3">
                                <label for="address" class="col-sm-2 col-form-label">地址</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" name="address" id="address">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="amount" class="col-sm-2 col-form-label">金额</label></label>
                                <div class="col-sm-10">
                                    <input type="number" class="form-control" name="amount" id="amount">
                                </div>
                            </div>
                            <button  class="btn btn-primary submit" >提交</button>`

    $('#form').on('click', '.submit', function () {
        var formData = document.getElementById('form');
        // console.log(formData.elements[0].value)
        // console.log(formData.elements['address'].value)
        let param = {};
        for (const i of formData.elements) {
            if (i.name) {
                param[i.name] = i.value;
            }
        }
        $.ajax({
            url: 'http://localhost:8009//houser//insert',
            type: 'post',
            contentType: "application/json",
            data: JSON.stringify({
                infoJson: JSON.stringify(param)
            }),
            success: (data) => {
                console.log(data)
            }
        })
        typewriter.typeString(JSON.stringify(param)).pauseFor(2500).start();
        formData.reset();
        return false
    })

    $.ajax({
        url: 'http://localhost:8009//houser//query-info',
        type: 'get',
        success: (data) => {
            console.log(data)
            if (data.length > 0) {
                info = JSON.parse(data[0].infoJson);
            }
        }
    })
</script>

</html>